{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sarahasif/Documents/Software%20Codes/my-tracking%20app/app/%28dashboard%29/users/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Plus, Search, Users, Shield, Trash2, Edit2, Mail, Building2, Key, Send, Car, UserCheck } from \"lucide-react\";\nimport { supabase } from \"../../../lib/supabase\";\nimport { useAuth, UserRole } from \"../../../contexts/AuthContext\";\nimport { useRouter } from \"next/navigation\";\n\ntype UserProfile = {\n  id: string;\n  email: string | null;\n  full_name: string | null;\n  phone: string | null;\n  company_id: string | null;\n  company_name: string | null;\n  role: UserRole;\n  created_at: string | null;\n};\n\ntype Vehicle = {\n  id: string;\n  registration_number: string | null;\n  vehicle_type: string;\n  assigned_driver_id: string | null;\n};\n\ntype Driver = {\n  id: string;\n  full_name: string;\n  assigned_vehicle_id: string | null;\n};\n\nexport default function UsersPage() {\n  const { isSuperAdmin, user } = useAuth();\n  const router = useRouter();\n  const [users, setUsers] = useState<UserProfile[]>([]);\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\n  const [drivers, setDrivers] = useState<Driver[]>([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [roleFilter, setRoleFilter] = useState<string>(\"all\");\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingUser, setEditingUser] = useState<UserProfile | null>(null);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    full_name: \"\",\n    phone: \"\",\n    role: \"owner\" as UserRole,\n    company_name: \"\",\n    company_id: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\n  const [passwordResetUser, setPasswordResetUser] = useState<UserProfile | null>(null);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [passwordResetLoading, setPasswordResetLoading] = useState(false);\n  const [passwordResetSuccess, setPasswordResetSuccess] = useState(\"\");\n  \n  // Vehicle assignment state\n  const [showVehicleModal, setShowVehicleModal] = useState(false);\n  const [assigningUser, setAssigningUser] = useState<UserProfile | null>(null);\n  const [selectedVehicleId, setSelectedVehicleId] = useState(\"\");\n  const [assigningVehicle, setAssigningVehicle] = useState(false);\n  const [vehicleSuccess, setVehicleSuccess] = useState(\"\");\n\n  // Redirect if not super admin\n  useEffect(() => {\n    if (!isSuperAdmin) {\n      router.push(\"/dashboard\");\n    }\n  }, [isSuperAdmin, router]);\n\n  const fetchUsers = async () => {\n    const { data } = await supabase\n      .from(\"profiles\")\n      .select(\"*\")\n      .order(\"created_at\", { ascending: false });\n\n    setUsers((data as UserProfile[]) || []);\n    setLoading(false);\n  };\n\n  const fetchVehicles = async () => {\n    const { data } = await supabase\n      .from(\"vehicles\")\n      .select(\"id, registration_number, vehicle_type, assigned_driver_id\")\n      .order(\"registration_number\");\n    \n    setVehicles((data as Vehicle[]) || []);\n  };\n\n  const fetchDrivers = async () => {\n    const { data } = await supabase\n      .from(\"drivers\")\n      .select(\"id, full_name, assigned_vehicle_id\")\n      .order(\"full_name\");\n    \n    setDrivers((data as Driver[]) || []);\n  };\n\n  useEffect(() => {\n    fetchUsers();\n    fetchVehicles();\n    fetchDrivers();\n  }, []);\n\n  const filteredUsers = users.filter((u) => {\n    const matchesSearch =\n      (u.full_name?.toLowerCase() || \"\").includes(searchTerm.toLowerCase()) ||\n      (u.email?.toLowerCase() || \"\").includes(searchTerm.toLowerCase()) ||\n      (u.company_name?.toLowerCase() || \"\").includes(searchTerm.toLowerCase());\n\n    const matchesRole = roleFilter === \"all\" || u.role === roleFilter;\n\n    return matchesSearch && matchesRole;\n  });\n\n  const handleUpdateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!editingUser) return;\n\n    const { error: updateError } = await supabase\n      .from(\"profiles\")\n      .update({\n        full_name: formData.full_name,\n        phone: formData.phone,\n        role: formData.role,\n        company_name: formData.company_name,\n        company_id: formData.company_id || null,\n      })\n      .eq(\"id\", editingUser.id);\n\n    if (updateError) {\n      setError(updateError.message);\n      return;\n    }\n\n    setShowModal(false);\n    setEditingUser(null);\n    fetchUsers();\n  };\n\n  const handleAssignVehicle = async () => {\n    if (!assigningUser || !selectedVehicleId) return;\n\n    setAssigningVehicle(true);\n    setError(\"\");\n\n    try {\n      // First, find if there's a driver record for this user, or create one\n      const { data: existingDriver } = await supabase\n        .from(\"drivers\")\n        .select(\"id\")\n        .eq(\"user_id\", assigningUser.id)\n        .maybeSingle();\n\n      let driverId = existingDriver?.id;\n\n      if (!driverId) {\n        // Create a driver record if one doesn't exist\n        const { data: newDriver, error: createError } = await supabase\n          .from(\"drivers\")\n          .insert({\n            user_id: assigningUser.id,\n            full_name: assigningUser.full_name || \"Unknown\",\n            phone_number: assigningUser.phone || \"\",\n            company_id: assigningUser.company_id,\n            status: \"active\",\n          })\n          .select(\"id\")\n          .single();\n\n        if (createError) {\n          setError(\"Failed to create driver record: \" + createError.message);\n          setAssigningVehicle(false);\n          return;\n        }\n        driverId = newDriver.id;\n      }\n\n      // Update the vehicle's assigned_driver_id\n      const { error: vehicleError } = await supabase\n        .from(\"vehicles\")\n        .update({ assigned_driver_id: driverId })\n        .eq(\"id\", selectedVehicleId);\n\n      if (vehicleError) {\n        setError(\"Failed to assign vehicle: \" + vehicleError.message);\n        setAssigningVehicle(false);\n        return;\n      }\n\n      // Update the driver's assigned_vehicle_id\n      const { error: driverError } = await supabase\n        .from(\"drivers\")\n        .update({ assigned_vehicle_id: selectedVehicleId })\n        .eq(\"id\", driverId);\n\n      if (driverError) {\n        setError(\"Failed to update driver: \" + driverError.message);\n        setAssigningVehicle(false);\n        return;\n      }\n\n      setVehicleSuccess(\"Vehicle assigned successfully!\");\n      fetchVehicles();\n      fetchDrivers();\n      \n      setTimeout(() => {\n        setShowVehicleModal(false);\n        setAssigningUser(null);\n        setSelectedVehicleId(\"\");\n        setVehicleSuccess(\"\");\n      }, 1500);\n    } catch (err) {\n      setError(\"An error occurred while assigning the vehicle\");\n    } finally {\n      setAssigningVehicle(false);\n    }\n  };\n\n  const handleDeleteUser = async (userId: string) => {\n    if (userId === user?.id) {\n      alert(\"You cannot delete your own account\");\n      return;\n    }\n\n    if (!confirm(\"Are you sure you want to delete this user? This action cannot be undone.\")) return;\n\n    // Delete from profiles (auth user deletion requires admin API)\n    await supabase.from(\"profiles\").delete().eq(\"id\", userId);\n    fetchUsers();\n  };\n\n  const openEditModal = (userProfile: UserProfile) => {\n    setEditingUser(userProfile);\n    setFormData({\n      email: userProfile.email || \"\",\n      full_name: userProfile.full_name || \"\",\n      phone: userProfile.phone || \"\",\n      role: userProfile.role || \"owner\",\n      company_name: userProfile.company_name || \"\",\n      company_id: userProfile.company_id || \"\",\n    });\n    setShowModal(true);\n  };\n\n  const openVehicleModal = (userProfile: UserProfile) => {\n    setAssigningUser(userProfile);\n    setSelectedVehicleId(\"\");\n    setVehicleSuccess(\"\");\n    setError(\"\");\n    setShowVehicleModal(true);\n  };\n\n  const openPasswordResetModal = (userProfile: UserProfile) => {\n    setPasswordResetUser(userProfile);\n    setNewPassword(\"\");\n    setConfirmPassword(\"\");\n    setPasswordResetSuccess(\"\");\n    setError(\"\");\n    setShowPasswordModal(true);\n  };\n\n  const handleSendPasswordResetEmail = async () => {\n    if (!passwordResetUser?.email) {\n      setError(\"User has no email address\");\n      return;\n    }\n\n    setPasswordResetLoading(true);\n    setError(\"\");\n    \n    try {\n      const { error: resetError } = await supabase.auth.resetPasswordForEmail(\n        passwordResetUser.email,\n        { redirectTo: `${window.location.origin}/signin` }\n      );\n\n      if (resetError) {\n        setError(resetError.message);\n      } else {\n        setPasswordResetSuccess(`Password reset email sent to ${passwordResetUser.email}`);\n      }\n    } catch (err) {\n      setError(\"Failed to send password reset email\");\n    } finally {\n      setPasswordResetLoading(false);\n    }\n  };\n\n  const handleSetNewPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!passwordResetUser) return;\n\n    if (newPassword.length < 6) {\n      setError(\"Password must be at least 6 characters\");\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    setPasswordResetLoading(true);\n    setError(\"\");\n\n    try {\n      // Use the admin API endpoint via an API route\n      const response = await fetch(\"/api/admin/reset-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          userId: passwordResetUser.id,\n          newPassword: newPassword,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        setError(result.error || \"Failed to reset password\");\n      } else {\n        setPasswordResetSuccess(\"Password has been reset successfully!\");\n        setNewPassword(\"\");\n        setConfirmPassword(\"\");\n      }\n    } catch (err) {\n      setError(\"Failed to reset password. Make sure the API route is configured.\");\n    } finally {\n      setPasswordResetLoading(false);\n    }\n  };\n\n  const getRoleBadgeColor = (role: UserRole) => {\n    switch (role) {\n      case \"super_admin\":\n        return \"bg-red-500/10 text-red-400 border-red-500/30\";\n      case \"owner\":\n        return \"bg-blue-500/10 text-blue-400 border-blue-500/30\";\n      case \"driver\":\n        return \"bg-green-500/10 text-green-400 border-green-500/30\";\n      default:\n        return \"bg-slate-500/10 text-slate-400 border-slate-500/30\";\n    }\n  };\n\n  const getRoleLabel = (role: UserRole) => {\n    switch (role) {\n      case \"super_admin\":\n        return \"Super Admin\";\n      case \"owner\":\n        return \"Owner\";\n      case \"driver\":\n        return \"Driver\";\n      default:\n        return \"User\";\n    }\n  };\n\n  if (!isSuperAdmin) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"p-8 flex items-center justify-center h-screen\">\n        <div className=\"text-slate-400\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-white mb-2\">User Management</h1>\n          <p className=\"text-slate-400\">Manage all users on the platform</p>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-6 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by name, email, or company...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-slate-500\"\n            />\n          </div>\n          <select\n            value={roleFilter}\n            onChange={(e) => setRoleFilter(e.target.value)}\n            className=\"px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n          >\n            <option value=\"all\">All Roles</option>\n            <option value=\"super_admin\">Super Admin</option>\n            <option value=\"owner\">Owner</option>\n            <option value=\"driver\">Driver</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n              <Users className=\"w-5 h-5 text-blue-400\" />\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-white\">{users.length}</p>\n              <p className=\"text-slate-400 text-sm\">Total Users</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-red-500/10 rounded-lg flex items-center justify-center\">\n              <Shield className=\"w-5 h-5 text-red-400\" />\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-white\">\n                {users.filter((u) => u.role === \"super_admin\").length}\n              </p>\n              <p className=\"text-slate-400 text-sm\">Super Admins</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n              <Building2 className=\"w-5 h-5 text-blue-400\" />\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-white\">\n                {users.filter((u) => u.role === \"owner\").length}\n              </p>\n              <p className=\"text-slate-400 text-sm\">Owners</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center\">\n              <Users className=\"w-5 h-5 text-green-400\" />\n            </div>\n            <div>\n              <p className=\"text-2xl font-bold text-white\">\n                {users.filter((u) => u.role === \"driver\").length}\n              </p>\n              <p className=\"text-slate-400 text-sm\">Drivers</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Users List */}\n      {filteredUsers.length === 0 ? (\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-12 text-center\">\n          <Users className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-bold text-white mb-2\">No users found</h3>\n          <p className=\"text-slate-400\">Try adjusting your search or filters</p>\n        </div>\n      ) : (\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl overflow-hidden\">\n          <table className=\"w-full\">\n            <thead className=\"bg-slate-900\">\n              <tr>\n                <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium\">User</th>\n                <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium\">Company</th>\n                <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium\">Role</th>\n                <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium\">Joined</th>\n                <th className=\"text-right px-6 py-4 text-slate-400 text-sm font-medium\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-slate-700\">\n              {filteredUsers.map((userProfile) => (\n                <tr key={userProfile.id} className=\"hover:bg-slate-700/50 transition-colors\">\n                  <td className=\"px-6 py-4\">\n                    <div>\n                      <p className=\"text-white font-medium\">\n                        {userProfile.full_name || \"No name\"}\n                      </p>\n                      <p className=\"text-slate-500 text-sm\">{userProfile.email}</p>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <p className=\"text-slate-300\">\n                      {userProfile.company_name || \"—\"}\n                    </p>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <span\n                      className={`px-2 py-1 text-xs font-medium rounded-full border ${getRoleBadgeColor(\n                        userProfile.role\n                      )}`}\n                    >\n                      {getRoleLabel(userProfile.role)}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <p className=\"text-slate-400 text-sm\">\n                      {userProfile.created_at\n                        ? new Date(userProfile.created_at).toLocaleDateString()\n                        : \"—\"}\n                    </p>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <div className=\"flex justify-end gap-2\">\n                      <button\n                        onClick={() => openEditModal(userProfile)}\n                        className=\"p-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors\"\n                        title=\"Edit User\"\n                      >\n                        <Edit2 className=\"w-4 h-4\" />\n                      </button>\n                      {userProfile.role === \"driver\" && (\n                        <button\n                          onClick={() => openVehicleModal(userProfile)}\n                          className=\"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition-colors\"\n                          title=\"Assign Vehicle\"\n                        >\n                          <Car className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                      <button\n                        onClick={() => openPasswordResetModal(userProfile)}\n                        className=\"p-2 bg-amber-500/10 text-amber-400 rounded-lg hover:bg-amber-500/20 transition-colors\"\n                        title=\"Reset Password\"\n                      >\n                        <Key className=\"w-4 h-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteUser(userProfile.id)}\n                        disabled={userProfile.id === user?.id}\n                        className=\"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                        title=\"Delete User\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {/* Edit User Modal */}\n      {showModal && editingUser && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl w-full max-w-md\">\n            <div className=\"flex items-center justify-between p-6 border-b border-slate-700\">\n              <h2 className=\"text-2xl font-bold text-white\">Edit User</h2>\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  setEditingUser(null);\n                }}\n                className=\"text-slate-400 hover:text-white transition-colors text-2xl\"\n              >\n                ×\n              </button>\n            </div>\n\n            <form onSubmit={handleUpdateUser} className=\"p-6 space-y-4\">\n              {error && (\n                <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-3\">\n                  <p className=\"text-red-400 text-sm\">{error}</p>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  disabled\n                  value={formData.email}\n                  className=\"w-full px-4 py-2 bg-slate-900/50 border border-slate-700 rounded-lg text-slate-500 cursor-not-allowed\"\n                />\n                <p className=\"text-slate-500 text-xs mt-1\">Email cannot be changed</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Full Name</label>\n                <input\n                  type=\"text\"\n                  value={formData.full_name}\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                  className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                  placeholder=\"John Doe\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Phone</label>\n                <input\n                  type=\"tel\"\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                  className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                  placeholder=\"+1 234 567 8900\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Role</label>\n                <select\n                  value={formData.role || \"owner\"}\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value as UserRole })}\n                  className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                >\n                  <option value=\"driver\">Driver</option>\n                  <option value=\"owner\">Owner</option>\n                  <option value=\"super_admin\">Super Admin</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Company Name</label>\n                <input\n                  type=\"text\"\n                  value={formData.company_name}\n                  onChange={(e) => setFormData({ ...formData, company_name: e.target.value })}\n                  className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                  placeholder=\"Acme Corp\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Company ID</label>\n                <input\n                  type=\"text\"\n                  value={formData.company_id}\n                  onChange={(e) => setFormData({ ...formData, company_id: e.target.value })}\n                  className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white font-mono text-sm\"\n                  placeholder=\"company-uuid\"\n                />\n                <p className=\"text-slate-500 text-xs mt-1\">Link this user to a company for data filtering</p>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    setEditingUser(null);\n                  }}\n                  className=\"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg\"\n                >\n                  Cancel\n                </button>\n                <button type=\"submit\" className=\"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg\">\n                  Save Changes\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Password Reset Modal */}\n      {showPasswordModal && passwordResetUser && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl w-full max-w-md\">\n            <div className=\"flex items-center justify-between p-6 border-b border-slate-700\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center\">\n                  <Key className=\"w-5 h-5 text-amber-400\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-white\">Reset Password</h2>\n                  <p className=\"text-slate-400 text-sm\">{passwordResetUser.email}</p>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  setShowPasswordModal(false);\n                  setPasswordResetUser(null);\n                  setPasswordResetSuccess(\"\");\n                  setError(\"\");\n                }}\n                className=\"text-slate-400 hover:text-white transition-colors text-2xl\"\n              >\n                ×\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {error && (\n                <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-3\">\n                  <p className=\"text-red-400 text-sm\">{error}</p>\n                </div>\n              )}\n\n              {passwordResetSuccess && (\n                <div className=\"bg-green-500/10 border border-green-500/50 rounded-lg p-3\">\n                  <p className=\"text-green-400 text-sm\">{passwordResetSuccess}</p>\n                </div>\n              )}\n\n              {/* Option 1: Send Reset Email */}\n              <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <Send className=\"w-5 h-5 text-blue-400\" />\n                  <h3 className=\"text-white font-medium\">Send Password Reset Email</h3>\n                </div>\n                <p className=\"text-slate-400 text-sm mb-4\">\n                  Send an email to the user with a link to reset their password.\n                </p>\n                <button\n                  onClick={handleSendPasswordResetEmail}\n                  disabled={passwordResetLoading}\n                  className=\"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center justify-center gap-2\"\n                >\n                  <Mail className=\"w-4 h-4\" />\n                  {passwordResetLoading ? \"Sending...\" : \"Send Reset Email\"}\n                </button>\n              </div>\n\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-slate-700\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-2 bg-slate-800 text-slate-500\">OR</span>\n                </div>\n              </div>\n\n              {/* Option 2: Set New Password Directly */}\n              <form onSubmit={handleSetNewPassword} className=\"space-y-4\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <Key className=\"w-5 h-5 text-amber-400\" />\n                  <h3 className=\"text-white font-medium\">Set New Password Directly</h3>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    New Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    value={newPassword}\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                    placeholder=\"Enter new password\"\n                    minLength={6}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Confirm Password\n                  </label>\n                  <input\n                    type=\"password\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    className=\"w-full px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                    placeholder=\"Confirm new password\"\n                    minLength={6}\n                  />\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={passwordResetLoading || !newPassword || !confirmPassword}\n                  className=\"w-full px-4 py-2 bg-amber-500 hover:bg-amber-600 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center justify-center gap-2\"\n                >\n                  <Key className=\"w-4 h-4\" />\n                  {passwordResetLoading ? \"Resetting...\" : \"Set New Password\"}\n                </button>\n              </form>\n\n              <div className=\"flex justify-end pt-2\">\n                <button\n                  onClick={() => {\n                    setShowPasswordModal(false);\n                    setPasswordResetUser(null);\n                    setPasswordResetSuccess(\"\");\n                    setError(\"\");\n                  }}\n                  className=\"px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Vehicle Assignment Modal */}\n      {showVehicleModal && assigningUser && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl w-full max-w-md\">\n            <div className=\"flex items-center justify-between p-6 border-b border-slate-700\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center\">\n                  <Car className=\"w-5 h-5 text-green-400\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-bold text-white\">Assign Vehicle</h2>\n                  <p className=\"text-slate-400 text-sm\">{assigningUser.full_name || assigningUser.email}</p>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  setShowVehicleModal(false);\n                  setAssigningUser(null);\n                  setVehicleSuccess(\"\");\n                  setError(\"\");\n                }}\n                className=\"text-slate-400 hover:text-white transition-colors text-2xl\"\n              >\n                ×\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              {error && (\n                <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-3\">\n                  <p className=\"text-red-400 text-sm\">{error}</p>\n                </div>\n              )}\n\n              {vehicleSuccess && (\n                <div className=\"bg-green-500/10 border border-green-500/50 rounded-lg p-3\">\n                  <p className=\"text-green-400 text-sm\">{vehicleSuccess}</p>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Select Vehicle</label>\n                <select\n                  value={selectedVehicleId}\n                  onChange={(e) => setSelectedVehicleId(e.target.value)}\n                  className=\"w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white\"\n                >\n                  <option value=\"\">Choose a vehicle...</option>\n                  {vehicles.map((v) => (\n                    <option key={v.id} value={v.id}>\n                      {v.registration_number || 'No Reg'} ({v.vehicle_type})\n                      {v.assigned_driver_id ? ' - Already Assigned' : ''}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4\">\n                <p className=\"text-slate-400 text-sm\">\n                  <strong className=\"text-white\">Note:</strong> Assigning a vehicle to this driver will:\n                </p>\n                <ul className=\"text-slate-400 text-sm mt-2 list-disc list-inside space-y-1\">\n                  <li>Create a driver record if one doesn&apos;t exist</li>\n                  <li>Link the vehicle to this driver</li>\n                  <li>Allow tracking of this driver in the mobile app</li>\n                </ul>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowVehicleModal(false);\n                    setAssigningUser(null);\n                    setVehicleSuccess(\"\");\n                    setError(\"\");\n                  }}\n                  className=\"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleAssignVehicle}\n                  disabled={!selectedVehicleId || assigningVehicle}\n                  className=\"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\n                >\n                  <Car className=\"w-4 h-4\" />\n                  {assigningVehicle ? \"Assigning...\" : \"Assign Vehicle\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}