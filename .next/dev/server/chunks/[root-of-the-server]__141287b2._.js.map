{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/sarahasif/Documents/Software%20Codes/my-tracking%20app/app/api/admin/reset-password/route.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nimport { NextRequest, NextResponse } from \"next/server\";\n\n// Create a Supabase client with the service role key for admin operations\nconst supabaseAdmin = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.SUPABASE_SERVICE_ROLE_KEY!,\n  {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n  }\n);\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { userId, newPassword } = await request.json();\n\n    if (!userId || !newPassword) {\n      return NextResponse.json(\n        { error: \"User ID and new password are required\" },\n        { status: 400 }\n      );\n    }\n\n    if (newPassword.length < 6) {\n      return NextResponse.json(\n        { error: \"Password must be at least 6 characters\" },\n        { status: 400 }\n      );\n    }\n\n    // Verify the requester is a super_admin (you might want to add auth check here)\n    // For now, we'll trust the frontend validation\n\n    // Update the user's password using the admin API\n    const { data, error } = await supabaseAdmin.auth.admin.updateUserById(\n      userId,\n      { password: newPassword }\n    );\n\n    if (error) {\n      console.error(\"Password reset error:\", error);\n      return NextResponse.json(\n        { error: error.message },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: \"Password has been reset successfully\",\n    });\n  } catch (error) {\n    console.error(\"Password reset error:\", error);\n    return NextResponse.json(\n      { error: \"Internal server error\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,0EAA0E;AAC1E,MAAM,gBAAgB,IAAA,yMAAY,gFAEhC,QAAQ,GAAG,CAAC,yBAAyB,EACrC;IACE,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;IAClB;AACF;AAGK,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,QAAQ,IAAI;QAElD,IAAI,CAAC,UAAU,CAAC,aAAa;YAC3B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,YAAY,MAAM,GAAG,GAAG;YAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyC,GAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,gFAAgF;QAChF,+CAA+C;QAE/C,iDAAiD;QACjD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,cAAc,IAAI,CAAC,KAAK,CAAC,cAAc,CACnE,QACA;YAAE,UAAU;QAAY;QAG1B,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,MAAM,OAAO;YAAC,GACvB;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}