{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sarahasif/Documents/Software%20Codes/my-tracking%20app/app/%28dashboard%29/alerts/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { AlertCircle, Check } from \"lucide-react\";\nimport { supabase } from \"../../../lib/supabase\";\nimport { useAuth } from \"../../../contexts/AuthContext\";\nimport { Database } from \"@/lib/database.types\";\n\nexport default function AlertsPage() {\n  const { user } = useAuth();\n  const [alerts, setAlerts] = useState<\n    Database[\"public\"][\"Tables\"][\"alerts\"][\"Row\"][]\n  >([]);\n  const [filter, setFilter] = useState<\"all\" | \"unacknowledged\">(\n    \"unacknowledged\"\n  );\n  const [loading, setLoading] = useState(true);\n\n  const fetchAlerts = async () => {\n    if (!user) return;\n\n    let query = supabase\n      .from(\"alerts\")\n      .select(\"*\")\n      .eq(\"user_id\", user.id)\n      .order(\"created_at\", { ascending: false });\n\n    if (filter === \"unacknowledged\") {\n      query = query.eq(\"acknowledged\", false);\n    }\n\n    const { data, error } = await query;\n\n    if (data && !error) {\n      setAlerts(data);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchAlerts();\n  }, [user, filter]);\n\n  const handleAcknowledge = async (alertId: string) => {\n    await supabase\n      .from(\"alerts\")\n      .update({ acknowledged: true, acknowledged_at: new Date().toISOString() })\n      .eq(\"id\", alertId);\n\n    fetchAlerts();\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"bg-red-500/10 text-red-400 border-red-500/50\";\n      case \"high\":\n        return \"bg-orange-500/10 text-orange-400 border-orange-500/50\";\n      case \"medium\":\n        return \"bg-amber-500/10 text-amber-400 border-amber-500/50\";\n      default:\n        return \"bg-blue-500/10 text-blue-400 border-blue-500/50\";\n    }\n  };\n\n  if (loading) {\n    return (\n      <div>\n        <div className=\"p-8 flex items-center justify-center h-screen\">\n          <div className=\"text-slate-400\">Loading...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"p-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-white mb-2\">Alerts</h1>\n            <p className=\"text-slate-400\">Monitor and manage vehicle alerts</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setFilter(\"unacknowledged\")}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                filter === \"unacknowledged\"\n                  ? \"bg-blue-500 text-white\"\n                  : \"bg-slate-700 text-slate-300 hover:bg-slate-600\"\n              }`}\n            >\n              Pending\n            </button>\n            <button\n              onClick={() => setFilter(\"all\")}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                filter === \"all\"\n                  ? \"bg-blue-500 text-white\"\n                  : \"bg-slate-700 text-slate-300 hover:bg-slate-600\"\n              }`}\n            >\n              All Alerts\n            </button>\n          </div>\n        </div>\n\n        {alerts.length === 0 ? (\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-12 text-center\">\n            <AlertCircle className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-bold text-white mb-2\">\n              {filter === \"unacknowledged\"\n                ? \"No pending alerts\"\n                : \"No alerts yet\"}\n            </h3>\n            <p className=\"text-slate-400\">\n              {filter === \"unacknowledged\"\n                ? \"All alerts have been acknowledged\"\n                : \"Alerts will appear here when triggered\"}\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {alerts.map((alert) => (\n              <div\n                key={alert.id}\n                className=\"bg-slate-800 border border-slate-700 rounded-xl p-6\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-3\">\n                      <AlertCircle\n                        className={`w-6 h-6 ${\n                          alert.severity === \"critical\" ||\n                          alert.severity === \"high\"\n                            ? \"text-red-400\"\n                            : alert.severity === \"medium\"\n                            ? \"text-amber-400\"\n                            : \"text-blue-400\"\n                        }`}\n                      />\n                      <span\n                        className={`px-3 py-1 rounded-full text-xs font-medium border ${getSeverityColor(\n                          alert.severity\n                        )}`}\n                      >\n                        {alert.severity.toUpperCase()}\n                      </span>\n                      <span className=\"px-3 py-1 bg-slate-700 text-slate-300 rounded-full text-xs font-medium\">\n                        {alert.alert_type.replace(\"_\", \" \")}\n                      </span>\n                    </div>\n                    <p className=\"text-white text-lg mb-2\">{alert.message}</p>\n                    <p className=\"text-slate-500 text-xs mt-1\">\n                      {new Date(alert.created_at ?? \"\").toLocaleString()}\n                    </p>\n                    {alert.acknowledged && alert.acknowledged_at && (\n                      <p className=\"text-green-400 text-sm mt-2\">\n                        Acknowledged{\" \"}\n                        {new Date(alert.acknowledged_at).toLocaleString()}\n                      </p>\n                    )}\n                  </div>\n                  {!alert.acknowledged && (\n                    <button\n                      onClick={() => handleAcknowledge(alert.id)}\n                      className=\"flex items-center gap-2 px-4 py-2 bg-green-500/10 text-green-400 border border-green-500/30 rounded-lg hover:bg-green-500/20 transition-colors\"\n                    >\n                      <Check className=\"w-4 h-4\" />\n                      Acknowledge\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/check.js","sources":["file:///Users/sarahasif/Documents/Software%20Codes/my-tracking%20app/node_modules/lucide-react/src/icons/check.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]];\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('check', __iconNode);\n\nexport default Check;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAuB;IAAC;QAAC,MAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,iBAAA,CAAA;YAAmB,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAC;CAAA;AAatF,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,KAAA,CAAA,CAAA,KAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8JAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}}]
}