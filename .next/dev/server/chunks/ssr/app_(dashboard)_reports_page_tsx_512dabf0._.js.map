{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sarahasif/Documents/Software%20Codes/my-tracking%20app/app/%28dashboard%29/reports/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport {\n  FileText,\n  Download,\n  Calendar,\n  Car,\n  Clock,\n  Gauge,\n  MapPin,\n  TrendingUp,\n  Filter,\n  Sparkles,\n  Printer,\n  RefreshCw,\n  AlertTriangle,\n  ChevronDown,\n  ChevronUp,\n  BarChart3,\n  Loader2,\n} from \"lucide-react\";\nimport { supabase } from \"../../../lib/supabase\";\nimport { useAuth } from \"../../../contexts/AuthContext\";\n\ntype ReportType = \"trips\" | \"speed\" | \"usage\" | \"alerts\";\n\ntype TripReport = {\n  id: string;\n  vehicle_id: string;\n  vehicle_name: string;\n  start_time: string;\n  end_time: string;\n  distance: number;\n  avg_speed: number;\n  max_speed: number;\n};\n\ntype VehicleUsage = {\n  vehicle_id: string;\n  vehicle_name: string;\n  total_trips: number;\n  total_distance: number;\n  total_hours: number;\n  avg_speed: number;\n  max_speed: number;\n  min_speed: number;\n  first_seen: string;\n  last_seen: string;\n};\n\ntype AISummary = {\n  overview: string;\n  insights: string[];\n  recommendations: string[];\n  vehicleHighlights: {\n    name: string;\n    highlight: string;\n  }[];\n};\n\nexport default function ReportsPage() {\n  const { user, isSuperAdmin } = useAuth();\n  const [reportType, setReportType] = useState<ReportType>(\"trips\");\n  const [dateRange, setDateRange] = useState({\n    start: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n    end: new Date().toISOString().split(\"T\")[0],\n  });\n  const [vehicles, setVehicles] = useState<any[]>([]);\n  const [selectedVehicle, setSelectedVehicle] = useState<string>(\"all\");\n  const [loading, setLoading] = useState(false);\n  const [reportData, setReportData] = useState<any[]>([]);\n  const [summary, setSummary] = useState({\n    totalTrips: 0,\n    totalDistance: 0,\n    avgSpeed: 0,\n    maxSpeed: 0,\n    totalAlerts: 0,\n  });\n  const [aiSummary, setAiSummary] = useState<AISummary | null>(null);\n  const [aiLoading, setAiLoading] = useState(false);\n  const [showAiSummary, setShowAiSummary] = useState(false);\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: \"asc\" | \"desc\" } | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const reportRef = useRef<HTMLDivElement>(null);\n\n  const fetchVehicles = async () => {\n    if (!user) return;\n\n    try {\n      const { data: profile } = await supabase\n        .from(\"profiles\")\n        .select(\"company_id\")\n        .eq(\"id\", user.id)\n        .maybeSingle();\n\n      let query = supabase.from(\"vehicles\").select(\"id, registration_number, brand, model\");\n\n      if (!isSuperAdmin && profile?.company_id) {\n        query = query.eq(\"company_id\", profile.company_id);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      setVehicles(data || []);\n    } catch (err) {\n      console.error(\"Error fetching vehicles:\", err);\n    }\n  };\n\n  const generateReport = async () => {\n    if (!user) return;\n    setLoading(true);\n    setError(null);\n    setAiSummary(null);\n    setShowAiSummary(false);\n\n    const { data: profile } = await supabase\n      .from(\"profiles\")\n      .select(\"company_id\")\n      .eq(\"id\", user.id)\n      .maybeSingle();\n\n    try {\n      if (reportType === \"trips\" || reportType === \"usage\") {\n        // Fetch tracking data\n        let query = supabase\n          .from(\"tracking_data\")\n          .select(\"*, vehicles(registration_number, brand, model)\")\n          .gte(\"timestamp\", `${dateRange.start}T00:00:00`)\n          .lte(\"timestamp\", `${dateRange.end}T23:59:59`)\n          .order(\"timestamp\", { ascending: true });\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        if (!isSuperAdmin && profile?.company_id) {\n          query = query.eq(\"company_id\", profile.company_id);\n        }\n\n        const { data: trackingData, error: trackingError } = await query;\n        if (trackingError) throw trackingError;\n\n        if (reportType === \"usage\") {\n          // Aggregate by vehicle\n          const vehicleStats = new Map<string, VehicleUsage>();\n\n          (trackingData || []).forEach((record: any) => {\n            const vehicleId = record.vehicle_id;\n            const vehicleName =\n              record.vehicles?.registration_number ||\n              `${record.vehicles?.brand || \"\"} ${record.vehicles?.model || \"\"}`.trim() ||\n              \"Unknown\";\n            const speed = record.speed || 0;\n            const timestamp = record.timestamp;\n\n            if (!vehicleStats.has(vehicleId)) {\n              vehicleStats.set(vehicleId, {\n                vehicle_id: vehicleId,\n                vehicle_name: vehicleName,\n                total_trips: 0,\n                total_distance: 0,\n                total_hours: 0,\n                avg_speed: 0,\n                max_speed: 0,\n                min_speed: Infinity,\n                first_seen: timestamp,\n                last_seen: timestamp,\n              });\n            }\n\n            const stats = vehicleStats.get(vehicleId)!;\n            stats.total_trips += 1;\n            stats.avg_speed = ((stats.avg_speed * (stats.total_trips - 1)) + speed) / stats.total_trips;\n            stats.max_speed = Math.max(stats.max_speed, speed);\n            stats.min_speed = Math.min(stats.min_speed, speed);\n            if (new Date(timestamp) < new Date(stats.first_seen)) {\n              stats.first_seen = timestamp;\n            }\n            if (new Date(timestamp) > new Date(stats.last_seen)) {\n              stats.last_seen = timestamp;\n            }\n          });\n\n          // Calculate hours based on first/last seen\n          vehicleStats.forEach((stats) => {\n            if (stats.min_speed === Infinity) stats.min_speed = 0;\n            const hours = (new Date(stats.last_seen).getTime() - new Date(stats.first_seen).getTime()) / (1000 * 60 * 60);\n            stats.total_hours = Math.max(0, hours);\n          });\n\n          const usageData = Array.from(vehicleStats.values());\n          setReportData(usageData);\n          \n          const totalAvgSpeed = usageData.reduce((s, v) => s + (v.avg_speed || 0), 0);\n          const maxSpeedOverall = Math.max(...usageData.map(v => v.max_speed || 0), 0);\n          \n          setSummary({\n            totalTrips: usageData.reduce((s, v) => s + v.total_trips, 0),\n            totalDistance: usageData.reduce((s, v) => s + v.total_distance, 0),\n            avgSpeed: usageData.length ? totalAvgSpeed / usageData.length : 0,\n            maxSpeed: maxSpeedOverall,\n            totalAlerts: usageData.filter(v => v.max_speed > 80).length,\n          });\n        } else {\n          // Trip reports - group by session\n          setReportData(trackingData || []);\n          const speeds = (trackingData || []).map((d: any) => d.speed || 0);\n          const maxSpeed = speeds.length ? Math.max(...speeds) : 0;\n          setSummary({\n            totalTrips: trackingData?.length || 0,\n            totalDistance: 0,\n            avgSpeed: speeds.length ? speeds.reduce((a: number, b: number) => a + b, 0) / speeds.length : 0,\n            maxSpeed,\n            totalAlerts: speeds.filter((s: number) => s > 80).length,\n          });\n        }\n      } else if (reportType === \"speed\") {\n        // Speed analytics\n        let query = supabase\n          .from(\"tracking_data\")\n          .select(\"speed, vehicle_id, timestamp, vehicles(registration_number)\")\n          .gte(\"timestamp\", `${dateRange.start}T00:00:00`)\n          .lte(\"timestamp\", `${dateRange.end}T23:59:59`)\n          .not(\"speed\", \"is\", null)\n          .order(\"speed\", { ascending: false })\n          .limit(100);\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        const { data, error: speedError } = await query;\n        if (speedError) throw speedError;\n        \n        setReportData(data || []);\n\n        const speeds = (data || []).map((d: any) => d.speed || 0);\n        const maxSpeed = speeds.length ? Math.max(...speeds) : 0;\n        setSummary({\n          totalTrips: data?.length || 0,\n          totalDistance: 0,\n          avgSpeed: speeds.length ? speeds.reduce((a: number, b: number) => a + b, 0) / speeds.length : 0,\n          maxSpeed,\n          totalAlerts: speeds.filter((s: number) => s > 80).length,\n        });\n      } else if (reportType === \"alerts\") {\n        // Alerts report\n        let query = supabase\n          .from(\"alerts\")\n          .select(\"*, vehicles(registration_number)\")\n          .gte(\"created_at\", `${dateRange.start}T00:00:00`)\n          .lte(\"created_at\", `${dateRange.end}T23:59:59`)\n          .order(\"created_at\", { ascending: false });\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        if (!isSuperAdmin) {\n          query = query.eq(\"user_id\", user.id);\n        }\n\n        const { data, error: alertError } = await query;\n        if (alertError) throw alertError;\n        \n        setReportData(data || []);\n        setSummary({\n          totalTrips: 0,\n          totalDistance: 0,\n          avgSpeed: 0,\n          maxSpeed: 0,\n          totalAlerts: data?.length || 0,\n        });\n      }\n    } catch (err: any) {\n      console.error(\"Error generating report:\", err);\n      setError(err.message || \"Failed to generate report. Please try again.\");\n    }\n\n    setLoading(false);\n  };\n\n  // Generate AI Summary\n  const generateAISummary = async () => {\n    if (reportData.length === 0) return;\n    \n    setAiLoading(true);\n    setShowAiSummary(true);\n\n    try {\n      // Simulate AI processing - in production, this would call an AI API\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      const insights: string[] = [];\n      const recommendations: string[] = [];\n      const vehicleHighlights: { name: string; highlight: string }[] = [];\n\n      if (reportType === \"usage\") {\n        const usageData = reportData as VehicleUsage[];\n        const totalRecords = usageData.reduce((s, v) => s + v.total_trips, 0);\n        const avgSpeedOverall = usageData.reduce((s, v) => s + (v.avg_speed || 0), 0) / (usageData.length || 1);\n        const maxSpeedVehicle = usageData.reduce((max, v) => (v.max_speed || 0) > (max.max_speed || 0) ? v : max, usageData[0]);\n        const mostActiveVehicle = usageData.reduce((max, v) => v.total_trips > max.total_trips ? v : max, usageData[0]);\n        const overspeedVehicles = usageData.filter(v => (v.max_speed || 0) > 80);\n\n        insights.push(`Fleet recorded ${totalRecords.toLocaleString()} data points across ${usageData.length} vehicles.`);\n        insights.push(`Average fleet speed is ${avgSpeedOverall.toFixed(1)} km/h.`);\n        \n        if (overspeedVehicles.length > 0) {\n          insights.push(`${overspeedVehicles.length} vehicle(s) exceeded 80 km/h speed limit during this period.`);\n        }\n\n        if (mostActiveVehicle) {\n          vehicleHighlights.push({\n            name: mostActiveVehicle.vehicle_name,\n            highlight: `Most active with ${mostActiveVehicle.total_trips} records`\n          });\n        }\n\n        if (maxSpeedVehicle && (maxSpeedVehicle.max_speed || 0) > 0) {\n          vehicleHighlights.push({\n            name: maxSpeedVehicle.vehicle_name,\n            highlight: `Highest speed recorded: ${(maxSpeedVehicle.max_speed || 0).toFixed(1)} km/h`\n          });\n        }\n\n        if (overspeedVehicles.length > 0) {\n          recommendations.push(\"Review speed violations and consider driver training for vehicles exceeding limits.\");\n        }\n        recommendations.push(\"Schedule regular maintenance for most active vehicles to prevent breakdowns.\");\n        recommendations.push(\"Consider route optimization for vehicles with high activity.\");\n\n      } else if (reportType === \"speed\") {\n        const overspeeds = reportData.filter((r: any) => r.speed > 80);\n        const avgSpeed = summary.avgSpeed;\n\n        insights.push(`Analyzed ${reportData.length} speed records in the selected period.`);\n        insights.push(`Average speed across all records: ${avgSpeed.toFixed(1)} km/h.`);\n        insights.push(`${overspeeds.length} instances of overspeeding (>80 km/h) detected.`);\n\n        if (summary.maxSpeed > 100) {\n          insights.push(`âš ï¸ Critical: Maximum speed of ${summary.maxSpeed.toFixed(1)} km/h detected!`);\n        }\n\n        if (overspeeds.length > reportData.length * 0.2) {\n          recommendations.push(\"High frequency of overspeeding detected. Implement speed monitoring alerts.\");\n        }\n        recommendations.push(\"Set up geofenced speed limits for high-risk areas.\");\n        recommendations.push(\"Consider incentive programs for safe driving behavior.\");\n\n      } else if (reportType === \"alerts\") {\n        const criticalAlerts = reportData.filter((r: any) => r.severity === \"critical\" || r.severity === \"high\");\n        const alertTypes = [...new Set(reportData.map((r: any) => r.alert_type))];\n\n        insights.push(`Total of ${reportData.length} alerts generated in the selected period.`);\n        insights.push(`${criticalAlerts.length} critical/high severity alerts require immediate attention.`);\n        insights.push(`Alert types include: ${alertTypes.slice(0, 3).join(\", \")}.`);\n\n        if (criticalAlerts.length > 0) {\n          recommendations.push(\"Address critical alerts immediately to prevent potential issues.\");\n        }\n        recommendations.push(\"Review recurring alert patterns and implement preventive measures.\");\n        recommendations.push(\"Ensure all vehicle safety systems are functioning properly.\");\n\n      } else {\n        insights.push(`Analyzed ${reportData.length} trip records from ${dateRange.start} to ${dateRange.end}.`);\n        insights.push(`Fleet average speed: ${summary.avgSpeed.toFixed(1)} km/h.`);\n        \n        if (summary.maxSpeed > 80) {\n          insights.push(`Maximum recorded speed: ${summary.maxSpeed.toFixed(1)} km/h.`);\n        }\n\n        recommendations.push(\"Regular trip logging helps identify optimization opportunities.\");\n        recommendations.push(\"Consider fuel efficiency monitoring integration.\");\n      }\n\n      const overviewText = reportType === \"usage\" \n        ? `This vehicle usage report covers ${reportData.length} vehicles from ${dateRange.start} to ${dateRange.end}. The fleet shows ${summary.totalTrips.toLocaleString()} total tracking records with an average speed of ${summary.avgSpeed.toFixed(1)} km/h.`\n        : reportType === \"speed\"\n        ? `This speed analytics report identifies ${summary.totalAlerts} overspeeding incidents out of ${reportData.length} records analyzed. The average speed is ${summary.avgSpeed.toFixed(1)} km/h with a maximum of ${summary.maxSpeed.toFixed(1)} km/h.`\n        : reportType === \"alerts\"\n        ? `This alerts report summarizes ${summary.totalAlerts} total alerts generated between ${dateRange.start} and ${dateRange.end}. Review critical alerts for immediate action.`\n        : `This trip history report contains ${summary.totalTrips} records from ${dateRange.start} to ${dateRange.end} with an average speed of ${summary.avgSpeed.toFixed(1)} km/h.`;\n\n      setAiSummary({\n        overview: overviewText,\n        insights,\n        recommendations,\n        vehicleHighlights,\n      });\n\n    } catch (err) {\n      console.error(\"Error generating AI summary:\", err);\n      setError(\"Failed to generate AI summary. Please try again.\");\n    }\n\n    setAiLoading(false);\n  };\n\n  // Sort handler\n  const handleSort = (key: string) => {\n    let direction: \"asc\" | \"desc\" = \"asc\";\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === \"asc\") {\n      direction = \"desc\";\n    }\n    setSortConfig({ key, direction });\n  };\n\n  // Get sorted data\n  const getSortedData = () => {\n    if (!sortConfig) return reportData;\n    \n    return [...reportData].sort((a, b) => {\n      const aVal = a[sortConfig.key] ?? 0;\n      const bVal = b[sortConfig.key] ?? 0;\n      \n      if (typeof aVal === \"string\" && typeof bVal === \"string\") {\n        return sortConfig.direction === \"asc\" \n          ? aVal.localeCompare(bVal)\n          : bVal.localeCompare(aVal);\n      }\n      \n      return sortConfig.direction === \"asc\" ? aVal - bVal : bVal - aVal;\n    });\n  };\n\n  // Print report\n  const handlePrint = () => {\n    window.print();\n  };\n\n  // Refresh report\n  const handleRefresh = () => {\n    generateReport();\n  };\n\n  // Handle report type change - auto generate report\n  const handleReportTypeChange = (type: ReportType) => {\n    setReportType(type);\n    // Auto-generate report after a small delay to let state update\n    setTimeout(() => {\n      if (user) {\n        generateReportForType(type);\n      }\n    }, 100);\n  };\n\n  // Generate report for specific type (used when clicking report type buttons)\n  const generateReportForType = async (type: ReportType) => {\n    if (!user) return;\n    setLoading(true);\n    setError(null);\n    setAiSummary(null);\n    setShowAiSummary(false);\n\n    const { data: profile } = await supabase\n      .from(\"profiles\")\n      .select(\"company_id\")\n      .eq(\"id\", user.id)\n      .maybeSingle();\n\n    try {\n      if (type === \"trips\" || type === \"usage\") {\n        // Fetch tracking data\n        let query = supabase\n          .from(\"tracking_data\")\n          .select(\"*, vehicles(registration_number, brand, model)\")\n          .gte(\"timestamp\", `${dateRange.start}T00:00:00`)\n          .lte(\"timestamp\", `${dateRange.end}T23:59:59`)\n          .order(\"timestamp\", { ascending: true });\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        if (!isSuperAdmin && profile?.company_id) {\n          query = query.eq(\"company_id\", profile.company_id);\n        }\n\n        const { data: trackingData, error: trackingError } = await query;\n        if (trackingError) throw trackingError;\n\n        if (type === \"usage\") {\n          // Aggregate by vehicle\n          const vehicleStats = new Map<string, VehicleUsage>();\n\n          (trackingData || []).forEach((record: any) => {\n            const vehicleId = record.vehicle_id;\n            const vehicleName =\n              record.vehicles?.registration_number ||\n              `${record.vehicles?.brand || \"\"} ${record.vehicles?.model || \"\"}`.trim() ||\n              \"Unknown\";\n            const speed = record.speed || 0;\n            const timestamp = record.timestamp;\n\n            if (!vehicleStats.has(vehicleId)) {\n              vehicleStats.set(vehicleId, {\n                vehicle_id: vehicleId,\n                vehicle_name: vehicleName,\n                total_trips: 0,\n                total_distance: 0,\n                total_hours: 0,\n                avg_speed: 0,\n                max_speed: 0,\n                min_speed: Infinity,\n                first_seen: timestamp,\n                last_seen: timestamp,\n              });\n            }\n\n            const stats = vehicleStats.get(vehicleId)!;\n            stats.total_trips += 1;\n            stats.avg_speed = ((stats.avg_speed * (stats.total_trips - 1)) + speed) / stats.total_trips;\n            stats.max_speed = Math.max(stats.max_speed, speed);\n            stats.min_speed = Math.min(stats.min_speed, speed);\n            if (new Date(timestamp) < new Date(stats.first_seen)) {\n              stats.first_seen = timestamp;\n            }\n            if (new Date(timestamp) > new Date(stats.last_seen)) {\n              stats.last_seen = timestamp;\n            }\n          });\n\n          // Calculate hours based on first/last seen\n          vehicleStats.forEach((stats) => {\n            if (stats.min_speed === Infinity) stats.min_speed = 0;\n            const hours = (new Date(stats.last_seen).getTime() - new Date(stats.first_seen).getTime()) / (1000 * 60 * 60);\n            stats.total_hours = Math.max(0, hours);\n          });\n\n          const usageData = Array.from(vehicleStats.values());\n          setReportData(usageData);\n          \n          const totalAvgSpeed = usageData.reduce((s, v) => s + (v.avg_speed || 0), 0);\n          const maxSpeedOverall = Math.max(...usageData.map(v => v.max_speed || 0), 0);\n          \n          setSummary({\n            totalTrips: usageData.reduce((s, v) => s + v.total_trips, 0),\n            totalDistance: usageData.reduce((s, v) => s + v.total_distance, 0),\n            avgSpeed: usageData.length ? totalAvgSpeed / usageData.length : 0,\n            maxSpeed: maxSpeedOverall,\n            totalAlerts: usageData.filter(v => v.max_speed > 80).length,\n          });\n        } else {\n          // Trip reports - group by session\n          setReportData(trackingData || []);\n          const speeds = (trackingData || []).map((d: any) => d.speed || 0);\n          const maxSpeed = speeds.length ? Math.max(...speeds) : 0;\n          setSummary({\n            totalTrips: trackingData?.length || 0,\n            totalDistance: 0,\n            avgSpeed: speeds.length ? speeds.reduce((a: number, b: number) => a + b, 0) / speeds.length : 0,\n            maxSpeed,\n            totalAlerts: speeds.filter((s: number) => s > 80).length,\n          });\n        }\n      } else if (type === \"speed\") {\n        // Speed analytics\n        let query = supabase\n          .from(\"tracking_data\")\n          .select(\"speed, vehicle_id, timestamp, vehicles(registration_number)\")\n          .gte(\"timestamp\", `${dateRange.start}T00:00:00`)\n          .lte(\"timestamp\", `${dateRange.end}T23:59:59`)\n          .not(\"speed\", \"is\", null)\n          .order(\"speed\", { ascending: false })\n          .limit(100);\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        const { data, error: speedError } = await query;\n        if (speedError) throw speedError;\n        \n        setReportData(data || []);\n\n        const speeds = (data || []).map((d: any) => d.speed || 0);\n        const maxSpeed = speeds.length ? Math.max(...speeds) : 0;\n        setSummary({\n          totalTrips: data?.length || 0,\n          totalDistance: 0,\n          avgSpeed: speeds.length ? speeds.reduce((a: number, b: number) => a + b, 0) / speeds.length : 0,\n          maxSpeed,\n          totalAlerts: speeds.filter((s: number) => s > 80).length,\n        });\n      } else if (type === \"alerts\") {\n        // Alerts report\n        let query = supabase\n          .from(\"alerts\")\n          .select(\"*, vehicles(registration_number)\")\n          .gte(\"created_at\", `${dateRange.start}T00:00:00`)\n          .lte(\"created_at\", `${dateRange.end}T23:59:59`)\n          .order(\"created_at\", { ascending: false });\n\n        if (selectedVehicle !== \"all\") {\n          query = query.eq(\"vehicle_id\", selectedVehicle);\n        }\n\n        if (!isSuperAdmin) {\n          query = query.eq(\"user_id\", user.id);\n        }\n\n        const { data, error: alertError } = await query;\n        if (alertError) throw alertError;\n        \n        setReportData(data || []);\n        setSummary({\n          totalTrips: 0,\n          totalDistance: 0,\n          avgSpeed: 0,\n          maxSpeed: 0,\n          totalAlerts: data?.length || 0,\n        });\n      }\n    } catch (err: any) {\n      console.error(\"Error generating report:\", err);\n      setError(err.message || \"Failed to generate report. Please try again.\");\n    }\n\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchVehicles();\n  }, [user]);\n\n  const exportToCSV = () => {\n    if (reportData.length === 0) return;\n\n    const headers = Object.keys(reportData[0]).join(\",\");\n    const rows = reportData\n      .map((row) =>\n        Object.values(row)\n          .map((val) => (typeof val === \"object\" ? JSON.stringify(val) : val))\n          .join(\",\")\n      )\n      .join(\"\\n\");\n\n    const csv = `${headers}\\n${rows}`;\n    const blob = new Blob([csv], { type: \"text/csv\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${reportType}-report-${dateRange.start}-${dateRange.end}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"p-4 md:p-8 print:p-4\" ref={reportRef}>\n      {/* Header - Mobile Optimized */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 md:mb-8 print:mb-4\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-bold text-white mb-1 md:mb-2 print:text-black\">Reports</h1>\n          <p className=\"text-sm md:text-base text-slate-400 print:text-gray-600\">Generate and analyze tracking reports</p>\n        </div>\n        \n        {/* Action Buttons - Mobile Grid */}\n        {reportData.length > 0 && (\n          <div className=\"flex flex-wrap items-center gap-2 md:gap-3 print:hidden\">\n            <button\n              onClick={handleRefresh}\n              className=\"flex items-center justify-center w-10 h-10 md:w-auto md:h-auto md:px-4 md:py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors\"\n              title=\"Refresh Report\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={handlePrint}\n              className=\"flex items-center justify-center w-10 h-10 md:w-auto md:h-auto md:px-4 md:py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors\"\n              title=\"Print Report\"\n            >\n              <Printer className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={generateAISummary}\n              disabled={aiLoading}\n              className=\"flex items-center gap-2 px-3 py-2 md:px-4 md:py-2 bg-purple-500 text-white text-sm md:text-base font-medium rounded-lg hover:bg-purple-600 disabled:opacity-50 transition-colors\"\n            >\n              {aiLoading ? (\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n              ) : (\n                <Sparkles className=\"w-4 h-4\" />\n              )}\n              <span className=\"hidden sm:inline\">AI Summary</span>\n              <span className=\"sm:hidden\">AI</span>\n            </button>\n            <button\n              onClick={exportToCSV}\n              className=\"flex items-center gap-2 px-3 py-2 md:px-6 md:py-2 bg-green-500 text-white text-sm md:text-base font-medium rounded-lg hover:bg-green-600 transition-colors\"\n            >\n              <Download className=\"w-4 h-4 md:w-5 md:h-5\" />\n              <span className=\"hidden sm:inline\">Export CSV</span>\n              <span className=\"sm:hidden\">CSV</span>\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl flex items-center gap-3 print:hidden\">\n          <AlertTriangle className=\"w-5 h-5 text-red-400 flex-shrink-0\" />\n          <p className=\"text-red-400\">{error}</p>\n          <button\n            onClick={() => setError(null)}\n            className=\"ml-auto text-red-400 hover:text-red-300\"\n          >\n            âœ•\n          </button>\n        </div>\n      )}\n\n      {/* Report Type Selection - Mobile Optimized */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-4 md:mb-6 print:hidden\">\n        {[\n          { type: \"trips\" as ReportType, icon: MapPin, label: \"Trip History\", description: \"View all tracking points\" },\n          { type: \"speed\" as ReportType, icon: Gauge, label: \"Speed Analytics\", description: \"Analyze speed data\" },\n          { type: \"usage\" as ReportType, icon: TrendingUp, label: \"Vehicle Usage\", description: \"Usage per vehicle\" },\n          { type: \"alerts\" as ReportType, icon: FileText, label: \"Alert Reports\", description: \"View all alerts\" },\n        ].map(({ type, icon: Icon, label, description }) => (\n          <button\n            key={type}\n            onClick={() => handleReportTypeChange(type)}\n            disabled={loading}\n            className={`p-3 md:p-4 rounded-xl border transition-all ${\n              reportType === type\n                ? \"bg-blue-500/10 border-blue-500 text-blue-400 ring-2 ring-blue-500/20\"\n                : \"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600 hover:bg-slate-750\"\n            } ${loading ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\n          >\n            <Icon className=\"w-5 h-5 md:w-6 md:h-6 mb-1 md:mb-2\" />\n            <p className=\"font-medium text-sm md:text-base\">{label}</p>\n            <p className=\"text-xs text-slate-500 mt-1 hidden md:block\">{description}</p>\n          </button>\n        ))}\n      </div>\n\n      {/* Filters - Mobile Optimized */}\n      <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-4 md:p-6 mb-4 md:mb-6 print:hidden\">\n        <div className=\"flex items-center gap-2 mb-3 md:mb-4\">\n          <Filter className=\"w-4 h-4 md:w-5 md:h-5 text-slate-400\" />\n          <h3 className=\"text-white font-medium text-sm md:text-base\">Filters</h3>\n        </div>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\n          <div>\n            <label className=\"block text-xs md:text-sm text-slate-400 mb-1.5 md:mb-2\">Start Date</label>\n            <div className=\"relative\">\n              <Calendar className=\"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-slate-500\" />\n              <input\n                type=\"date\"\n                value={dateRange.start}\n                onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\n                className=\"w-full pl-8 md:pl-10 pr-2 md:pr-4 py-2 text-sm md:text-base bg-slate-900 border border-slate-700 rounded-lg text-white\"\n              />\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-xs md:text-sm text-slate-400 mb-1.5 md:mb-2\">End Date</label>\n            <div className=\"relative\">\n              <Calendar className=\"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-slate-500\" />\n              <input\n                type=\"date\"\n                value={dateRange.end}\n                onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\n                className=\"w-full pl-8 md:pl-10 pr-2 md:pr-4 py-2 text-sm md:text-base bg-slate-900 border border-slate-700 rounded-lg text-white\"\n              />\n            </div>\n          </div>\n          <div className=\"col-span-2 md:col-span-1\">\n            <label className=\"block text-xs md:text-sm text-slate-400 mb-1.5 md:mb-2\">Vehicle</label>\n            <select\n              value={selectedVehicle}\n              onChange={(e) => setSelectedVehicle(e.target.value)}\n              className=\"w-full px-3 md:px-4 py-2 text-sm md:text-base bg-slate-900 border border-slate-700 rounded-lg text-white\"\n            >\n              <option value=\"all\">All Vehicles</option>\n              {vehicles.map((v) => (\n                <option key={v.id} value={v.id}>\n                  {v.registration_number || `${v.brand} ${v.model}`}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"col-span-2 md:col-span-1 flex items-end\">\n            <button\n              onClick={generateReport}\n              disabled={loading}\n              className=\"w-full px-4 md:px-6 py-2 bg-blue-500 text-white text-sm md:text-base font-medium rounded-lg hover:bg-blue-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\n            >\n              {loading && <Loader2 className=\"w-4 h-4 animate-spin\" />}\n              {loading ? \"Generating...\" : \"Generate Report\"}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Summary Cards - Mobile Optimized */}\n      {reportData.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-4 md:mb-6 print:grid-cols-4\">\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-3 md:p-6 print:bg-gray-100 print:border-gray-300\">\n            <div className=\"flex items-center gap-2 md:gap-3\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-blue-500/10 rounded-lg flex items-center justify-center print:bg-blue-100\">\n                <MapPin className=\"w-4 h-4 md:w-5 md:h-5 text-blue-400 print:text-blue-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg md:text-2xl font-bold text-white print:text-black\">{summary.totalTrips.toLocaleString()}</p>\n                <p className=\"text-slate-400 text-xs md:text-sm print:text-gray-600\">Records</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-3 md:p-6 print:bg-gray-100 print:border-gray-300\">\n            <div className=\"flex items-center gap-2 md:gap-3\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-green-500/10 rounded-lg flex items-center justify-center print:bg-green-100\">\n                <Gauge className=\"w-4 h-4 md:w-5 md:h-5 text-green-400 print:text-green-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg md:text-2xl font-bold text-white print:text-black\">{(summary.maxSpeed || 0).toFixed(1)}</p>\n                <p className=\"text-slate-400 text-xs md:text-sm print:text-gray-600\">Max km/h</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-3 md:p-6 print:bg-gray-100 print:border-gray-300\">\n            <div className=\"flex items-center gap-2 md:gap-3\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-amber-500/10 rounded-lg flex items-center justify-center print:bg-amber-100\">\n                <BarChart3 className=\"w-4 h-4 md:w-5 md:h-5 text-amber-400 print:text-amber-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg md:text-2xl font-bold text-white print:text-black\">{(summary.avgSpeed || 0).toFixed(1)}</p>\n                <p className=\"text-slate-400 text-xs md:text-sm print:text-gray-600\">Avg km/h</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-3 md:p-6 print:bg-gray-100 print:border-gray-300\">\n            <div className=\"flex items-center gap-2 md:gap-3\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-red-500/10 rounded-lg flex items-center justify-center print:bg-red-100\">\n                <AlertTriangle className=\"w-4 h-4 md:w-5 md:h-5 text-red-400 print:text-red-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg md:text-2xl font-bold text-white print:text-black\">{summary.totalAlerts}</p>\n                <p className=\"text-slate-400 text-xs md:text-sm print:text-gray-600\">Alerts</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* AI Summary Section - Mobile Optimized */}\n      {showAiSummary && (\n        <div className=\"bg-gradient-to-r from-purple-900/30 to-blue-900/30 border border-purple-500/30 rounded-xl p-4 md:p-6 mb-4 md:mb-6 print:bg-purple-50 print:border-purple-300\">\n          <div className=\"flex items-center justify-between mb-3 md:mb-4\">\n            <div className=\"flex items-center gap-2 md:gap-3\">\n              <div className=\"w-8 h-8 md:w-10 md:h-10 bg-purple-500/20 rounded-lg flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-purple-400\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-bold text-white print:text-black\">AI-Generated Summary</h3>\n                <p className=\"text-purple-300 text-sm print:text-purple-700\">Powered by intelligent analysis</p>\n              </div>\n            </div>\n            <button\n              onClick={() => setShowAiSummary(false)}\n              className=\"text-slate-400 hover:text-white print:hidden\"\n            >\n              âœ•\n            </button>\n          </div>\n\n          {aiLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"w-8 h-8 text-purple-400 animate-spin\" />\n              <span className=\"ml-3 text-purple-300\">Analyzing data...</span>\n            </div>\n          ) : aiSummary ? (\n            <div className=\"space-y-6\">\n              {/* Overview */}\n              <div className=\"bg-slate-800/50 rounded-lg p-4 print:bg-white\">\n                <h4 className=\"text-sm font-medium text-purple-300 mb-2 print:text-purple-700\">Overview</h4>\n                <p className=\"text-white print:text-black\">{aiSummary.overview}</p>\n              </div>\n\n              {/* Insights and Recommendations Grid */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {/* Key Insights */}\n                <div className=\"bg-slate-800/50 rounded-lg p-4 print:bg-white\">\n                  <h4 className=\"text-sm font-medium text-blue-300 mb-3 print:text-blue-700\">ðŸ“Š Key Insights</h4>\n                  <ul className=\"space-y-2\">\n                    {aiSummary.insights.map((insight, idx) => (\n                      <li key={idx} className=\"flex items-start gap-2 text-slate-300 text-sm print:text-gray-700\">\n                        <span className=\"text-blue-400 mt-1\">â€¢</span>\n                        <span>{insight}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                {/* Recommendations */}\n                <div className=\"bg-slate-800/50 rounded-lg p-4 print:bg-white\">\n                  <h4 className=\"text-sm font-medium text-green-300 mb-3 print:text-green-700\">ðŸ’¡ Recommendations</h4>\n                  <ul className=\"space-y-2\">\n                    {aiSummary.recommendations.map((rec, idx) => (\n                      <li key={idx} className=\"flex items-start gap-2 text-slate-300 text-sm print:text-gray-700\">\n                        <span className=\"text-green-400 mt-1\">â€¢</span>\n                        <span>{rec}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n\n              {/* Vehicle Highlights */}\n              {aiSummary.vehicleHighlights.length > 0 && (\n                <div className=\"bg-slate-800/50 rounded-lg p-4 print:bg-white\">\n                  <h4 className=\"text-sm font-medium text-amber-300 mb-3 print:text-amber-700\">ðŸš— Vehicle Highlights</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    {aiSummary.vehicleHighlights.map((vh, idx) => (\n                      <div key={idx} className=\"flex items-center gap-3 bg-slate-700/50 rounded-lg p-3 print:bg-gray-100\">\n                        <Car className=\"w-5 h-5 text-amber-400 flex-shrink-0 print:text-amber-600\" />\n                        <div>\n                          <p className=\"text-white font-medium text-sm print:text-black\">{vh.name}</p>\n                          <p className=\"text-slate-400 text-xs print:text-gray-600\">{vh.highlight}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : null}\n        </div>\n      )}\n\n      {/* Report Data - Empty State */}\n      {reportData.length === 0 ? (\n        <div className=\"bg-slate-800 border border-slate-700 rounded-xl p-8 md:p-12 text-center print:hidden\">\n          <FileText className=\"w-12 h-12 md:w-16 md:h-16 text-slate-600 mx-auto mb-4\" />\n          <h3 className=\"text-lg md:text-xl font-bold text-white mb-2\">No Report Data</h3>\n          <p className=\"text-slate-400 text-sm md:text-base max-w-md mx-auto\">\n            Tap a report type above to generate your data.\n          </p>\n        </div>\n      ) : (\n        <>\n          {/* Mobile Card View */}\n          <div className=\"md:hidden space-y-3\">\n            {getSortedData().slice(0, 20).map((row, idx) => (\n              <div key={idx} className=\"bg-slate-800 border border-slate-700 rounded-xl p-4\">\n                {reportType === \"usage\" && (\n                  <>\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <Car className=\"w-4 h-4 text-blue-400\" />\n                        <span className=\"font-medium text-white text-sm\">{row.vehicle_name || \"Unknown\"}</span>\n                      </div>\n                      <span className={`px-2 py-0.5 text-xs rounded-full ${(row.max_speed || 0) > 80 ? \"bg-red-500/10 text-red-400\" : \"bg-green-500/10 text-green-400\"}`}>\n                        {(row.max_speed || 0) > 80 ? \"Overspeed\" : \"Normal\"}\n                      </span>\n                    </div>\n                    <div className=\"grid grid-cols-3 gap-2 text-center\">\n                      <div className=\"bg-slate-900 rounded-lg p-2\">\n                        <p className=\"text-xs text-slate-400\">Records</p>\n                        <p className=\"text-sm font-bold text-white\">{row.total_trips || 0}</p>\n                      </div>\n                      <div className=\"bg-slate-900 rounded-lg p-2\">\n                        <p className=\"text-xs text-slate-400\">Avg</p>\n                        <p className=\"text-sm font-bold text-white\">{(row.avg_speed || 0).toFixed(1)}</p>\n                      </div>\n                      <div className=\"bg-slate-900 rounded-lg p-2\">\n                        <p className=\"text-xs text-slate-400\">Max</p>\n                        <p className={`text-sm font-bold ${(row.max_speed || 0) > 80 ? \"text-red-400\" : \"text-white\"}`}>{(row.max_speed || 0).toFixed(1)}</p>\n                      </div>\n                    </div>\n                  </>\n                )}\n                {reportType === \"speed\" && (\n                  <>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-white text-sm font-medium\">{row.vehicles?.registration_number || row.vehicle_id?.slice(0, 8) || \"Unknown\"}</span>\n                      <span className={`px-2 py-0.5 text-xs rounded-full ${(row.speed || 0) > 80 ? \"bg-red-500/10 text-red-400\" : \"bg-green-500/10 text-green-400\"}`}>\n                        {(row.speed || 0) > 80 ? \"Overspeed\" : \"Normal\"}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Gauge className=\"w-4 h-4 text-amber-400\" />\n                        <span className={`font-bold ${(row.speed || 0) > 80 ? \"text-red-400\" : \"text-white\"}`}>{row.speed || 0} km/h</span>\n                      </div>\n                      <span className=\"text-xs text-slate-400\">{row.timestamp ? new Date(row.timestamp).toLocaleString() : \"-\"}</span>\n                    </div>\n                  </>\n                )}\n                {reportType === \"alerts\" && (\n                  <>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-white text-sm font-medium capitalize\">{row.alert_type?.replace(/_/g, \" \") || \"Alert\"}</span>\n                      <span className={`px-2 py-0.5 text-xs rounded-full ${\n                        row.severity === \"critical\" || row.severity === \"high\" ? \"bg-red-500/10 text-red-400\" :\n                        row.severity === \"medium\" ? \"bg-amber-500/10 text-amber-400\" : \"bg-blue-500/10 text-blue-400\"\n                      }`}>{row.severity || \"low\"}</span>\n                    </div>\n                    <p className=\"text-slate-300 text-sm mb-2 line-clamp-2\">{row.message || \"-\"}</p>\n                    <p className=\"text-xs text-slate-500\">{row.created_at ? new Date(row.created_at).toLocaleString() : \"-\"}</p>\n                  </>\n                )}\n                {reportType === \"trips\" && (\n                  <>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-white text-sm font-medium\">{row.vehicles?.registration_number || row.vehicle_id?.slice(0, 8) || \"Unknown\"}</span>\n                      <span className={`font-bold text-sm ${(row.speed || 0) > 80 ? \"text-red-400\" : \"text-slate-300\"}`}>{row.speed || 0} km/h</span>\n                    </div>\n                    <p className=\"text-xs text-slate-400\">{row.timestamp ? new Date(row.timestamp).toLocaleString() : \"-\"}</p>\n                  </>\n                )}\n              </div>\n            ))}\n            {reportData.length > 20 && (\n              <div className=\"text-center py-3 text-slate-400 text-sm\">\n                Showing 20 of {reportData.length} records. Export CSV for full data.\n              </div>\n            )}\n          </div>\n\n          {/* Desktop Table View */}\n          <div className=\"hidden md:block bg-slate-800 border border-slate-700 rounded-xl overflow-hidden print:block print:bg-white print:border-gray-300\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-slate-900 print:bg-gray-200\">\n                <tr>\n                  {reportType === \"usage\" && (\n                    <>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"vehicle_name\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Vehicle\n                          {sortConfig?.key === \"vehicle_name\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"total_trips\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Total Records\n                          {sortConfig?.key === \"total_trips\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"avg_speed\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Avg Speed\n                          {sortConfig?.key === \"avg_speed\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"max_speed\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Max Speed\n                          {sortConfig?.key === \"max_speed\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Active Hours\n                      </th>\n                    </>\n                  )}\n                  {reportType === \"speed\" && (\n                    <>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Vehicle\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"speed\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Speed (km/h)\n                          {sortConfig?.key === \"speed\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"timestamp\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Timestamp\n                          {sortConfig?.key === \"timestamp\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Status\n                      </th>\n                    </>\n                  )}\n                  {reportType === \"alerts\" && (\n                    <>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Type\n                      </th>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Message\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"severity\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Severity\n                          {sortConfig?.key === \"severity\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"created_at\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Date\n                          {sortConfig?.key === \"created_at\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                    </>\n                  )}\n                  {reportType === \"trips\" && (\n                    <>\n                      <th className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium print:text-gray-700\">\n                        Vehicle\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"speed\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Speed\n                          {sortConfig?.key === \"speed\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                      <th \n                        className=\"text-left px-6 py-4 text-slate-400 text-sm font-medium cursor-pointer hover:text-white print:text-gray-700\"\n                        onClick={() => handleSort(\"timestamp\")}\n                      >\n                        <div className=\"flex items-center gap-1\">\n                          Timestamp\n                          {sortConfig?.key === \"timestamp\" && (\n                            sortConfig.direction === \"asc\" ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />\n                          )}\n                        </div>\n                      </th>\n                    </>\n                  )}\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-700 print:divide-gray-300\">\n                {getSortedData().slice(0, 50).map((row, idx) => (\n                  <tr key={idx} className=\"hover:bg-slate-700/50 transition-colors print:hover:bg-gray-100\">\n                    {reportType === \"usage\" && (\n                      <>\n                        <td className=\"px-6 py-4 text-white print:text-black font-medium\">{row.vehicle_name || \"Unknown\"}</td>\n                        <td className=\"px-6 py-4 text-slate-300 print:text-gray-700\">{row.total_trips || 0}</td>\n                        <td className=\"px-6 py-4 text-slate-300 print:text-gray-700\">{(row.avg_speed || 0).toFixed(1)} km/h</td>\n                        <td className=\"px-6 py-4\">\n                          <span className={`font-medium ${(row.max_speed || 0) > 80 ? \"text-red-400\" : \"text-green-400\"} print:text-black`}>\n                            {(row.max_speed || 0).toFixed(1)} km/h\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 text-slate-300 print:text-gray-700\">{(row.total_hours || 0).toFixed(1)} hrs</td>\n                      </>\n                    )}\n                    {reportType === \"speed\" && (\n                      <>\n                        <td className=\"px-6 py-4 text-white print:text-black font-medium\">\n                          {row.vehicles?.registration_number || row.vehicle_id?.slice(0, 8) || \"Unknown\"}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span\n                            className={`${\n                              (row.speed || 0) > 80 ? \"text-red-400\" : \"text-green-400\"\n                            } font-medium print:text-black`}\n                          >\n                            {row.speed || 0} km/h\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 text-slate-400 print:text-gray-600\">\n                          {row.timestamp ? new Date(row.timestamp).toLocaleString() : \"-\"}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span className={`px-2 py-1 text-xs rounded-full ${\n                            (row.speed || 0) > 80 ? \"bg-red-500/10 text-red-400\" : \"bg-green-500/10 text-green-400\"\n                          }`}>\n                            {(row.speed || 0) > 80 ? \"Overspeed\" : \"Normal\"}\n                          </span>\n                        </td>\n                      </>\n                    )}\n                    {reportType === \"alerts\" && (\n                      <>\n                        <td className=\"px-6 py-4 text-white capitalize print:text-black\">\n                          {row.alert_type?.replace(/_/g, \" \") || \"Unknown\"}\n                        </td>\n                        <td className=\"px-6 py-4 text-slate-300 print:text-gray-700 max-w-xs truncate\">{row.message || \"-\"}</td>\n                        <td className=\"px-6 py-4\">\n                          <span\n                            className={`px-2 py-1 text-xs rounded-full ${\n                              row.severity === \"critical\" || row.severity === \"high\"\n                                ? \"bg-red-500/10 text-red-400\"\n                                : row.severity === \"medium\"\n                                ? \"bg-amber-500/10 text-amber-400\"\n                                : \"bg-blue-500/10 text-blue-400\"\n                            }`}\n                          >\n                            {row.severity || \"low\"}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 text-slate-400 print:text-gray-600\">\n                          {row.created_at ? new Date(row.created_at).toLocaleString() : \"-\"}\n                        </td>\n                      </>\n                    )}\n                    {reportType === \"trips\" && (\n                      <>\n                        <td className=\"px-6 py-4 text-white print:text-black font-medium\">\n                          {row.vehicles?.registration_number || row.vehicle_id?.slice(0, 8) || \"Unknown\"}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span className={`font-medium ${(row.speed || 0) > 80 ? \"text-red-400\" : \"text-slate-300\"} print:text-black`}>\n                            {row.speed || 0} km/h\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 text-slate-400 print:text-gray-600\">\n                          {row.timestamp ? new Date(row.timestamp).toLocaleString() : \"-\"}\n                        </td>\n                      </>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          {reportData.length > 50 && (\n            <div className=\"p-4 text-center text-slate-400 border-t border-slate-700 print:hidden\">\n              Showing 50 of {reportData.length} records. Export to CSV for full data.\n            </div>\n          )}\n        </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}